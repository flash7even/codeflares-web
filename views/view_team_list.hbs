<head>
	<link rel="stylesheet" type="text/css" href="/css/main.css">
</head>

<div class="show-team">
    <div class="table-type-1">
        <table id="teamListTable" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Team Name</th>
                    <th>Purpose</th>
                    <th>Institution</th>
                    <th>Members</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
</div>


<script type="text/javascript">

    function getTeamList(){
        var db_team_list = [];

        {{#each team_list}}
            console.log("{{team_name}}")
            var team_name = "{{team_name}}"
            var member_list_items = "";
            var mem_count = 0;
            var my_status = "{{status}}"
            {{#each member_list}}
                if(mem_count>0) member_list_items += ",  ";
                member_list_items += '<a href = "/profile/{{user_handle}}/" style="color: #3b6e99; font-weight:700">{{user_handle}} ({{status}})</a>'
                mem_count += 1
            {{/each}}
            var team_link = '<a href = "/team/view/{{id}}/" style="color: #86c232; font-weight:700">{{team_name}}</a>'

            var action_link = ""

            if(my_status != "confirmed"){
                action_link += '<a href="/team/confirm/{{id}}/" title="Confirm" data-toggle="tooltip"><i class="fas fa-check-circle"></i></a>'
                action_link += "  "
                action_link += '<a href="/team/reject/{{id}}/" title="Reject" data-toggle="tooltip"><i class="fas fa-times-circle"></i></a>'
            }else{
                action_link += '<a href="/team/reject/{{id}}/" title="Remove" data-toggle="tooltip"><i class="fas fa-minus-circle"></i></a>'
            }
            var team_data = [team_link, "{{team_purpose}}", "{{institution_name}}", member_list_items, action_link];
            db_team_list.push(team_data)
        {{/each}}

        return db_team_list;
    }

    function showTeamsDTSearchTable(){
        var dt_list = getTeamList();
        
        $("#teamListTable").dataTable({
            "aaData": dt_list,
            paging: true,
            destroy: true,
            scrollY: '500px',
            scrollCollapse: true,
            responsive: true
        });
    }

    $(document).ready( function () {
        showTeamsDTSearchTable();
    } );

</script>
