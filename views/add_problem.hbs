<head>
	<link rel="stylesheet" type="text/css" href="/css/main.css">
</head>


<div class="form-type-1" style="width: 80%;">	
	<div class="cfs-title-1">
		<h5 style="text-align: center;"><b>Add Problem Suggestion</b></h5>
	</div>
	<br>
	<br>
    <form action="/problem/add/" method="post" style="padding: 10px;">
		<div class="form-row">
			<div class="form-group col-md-12">
				<div class="input-group">
					<input type="text" id="problem_name" class="form-control" name="problem_name" placeholder="Problem Name">
				</div>
			</div>
		</div>
		<div class="form-row">
			<div class="form-group col-md-12">
				<div class="input-group">
					<input type="text" id="problem_id" class="form-control" name="problem_id" placeholder="Problem ID">
				</div>
			</div>
		</div>
		<div class="form-row">
			<div class="form-group col-md-12">
				<div class="input-group">
					<select class="form-control" id="problem_type">
						<option value="classical">Classical</option>
						<option value="regular">Regular</option>
						<option value="rare_knowledge">Rare Knowledge</option>
					</select>
				</div>
			</div>
		</div>
		<div class="form-row">
			<div class="form-group col-md-12">
				<div class="input-group">
					<input type="text" id="problem_description" class="form-control" name="problem_description" placeholder="Remarks">
				</div>
			</div>
		</div>
		<div class="form-row">
			<div class="form-group col-md-12">
				<div class="input-group">
                        <select class="form-control" id="oj_name" name="oj_name">
                            <option value="codeforces">Codeforces</option>
                            <option value="codechef">Codechef</option>
                            <option value="lightoj">Light OJ</option>
                            <option value="spoj">SPOJ</option>
                            <option value="uva">UVA</option>
                        </select>
				</div>
			</div>
		</div>
		<div class="form-row">
			<div class="form-group col-md-6">
				<div class="input-group">
					<input type="text" id="problem_difficulty" class="form-control" name="problem_difficulty" placeholder="Difficulty">
				</div>
			</div>
			<div class="form-group col-md-6">
				<div class="input-group">
					<input type="text" id="problem_significance" class="form-control" name="problem_significance" placeholder="Significance">
				</div>
			</div>
		</div>
		<div class="form-row">
			<div class="form-group col-md-12">
				<div class="input-group">
					<input type="text" id="source_link" class="form-control" name="source_link" placeholder="Source Link">
				</div>
			</div>
		</div>
		<div class="category-group">
			<div class="form-row control-group">
				<div class="form-group col-md-6">
					<div class="input-group">
						<input type="text" autocomplete="off" id="problem_category@1" class="form-control autocomplete" name="problem_category@1" placeholder="Category">
					</div>
				</div>
				<div class="form-group col-md-5">
					<div class="input-group">
						<input type="text" id="dependency_factor@1" class="form-control" name="dependency_factor@1" placeholder="Factor">
					</div>
				</div>
				<div class="form-group col-sm-1" style="width: 10px !important;">
					<button class="btn add-more btn-block" type="button"><i class="fas fa-plus"></i></button>
				</div>
			</div>
		</div>


		<div class="copy hide" hidden>
			<div class="form-row control-group">
				<div class="form-group col-md-6">
					<div class="input-group">
						<input type="text" autocomplete="off" id="problem_category_tmp" class="form-control autocomplete" name="problem_category_tmp" placeholder="Category">
					</div>
				</div>
				<div class="form-group col-md-5">
					<div class="input-group">
						<input type="text" id="dependency_factor_tmp" class="form-control" name="dependency_factor_tmp" placeholder="Factor">
					</div>
				</div>
				<div class="form-group col-sm-1" style="width: 10px !important;">
					<button class="btn remove btn-block" type="button"><i class="fas fa-minus"></i></button>
				</div>
			</div>
		</div>

		<br>
		<br>
		<br>
		<div class="form-group submit-btn-div">
            <button type="submit" class="btn submit-btn btn-light btn-block btn">Submit</button>
        </div>
	</form>
</div>

<script type="text/javascript">
	var cat_item = 1;

	function enableAutoComplete(){
		$(".autocomplete").typeahead({
			// data source
			source: getAlgorithmList(),

			// how many items to show
			items: 8,

			// default template
			menu: '<ul class="typeahead dropdown-menu" role="listbox"></ul>',
			item: '<li><a class="dropdown-item" href="#" role="option"></a></li>',
			headerHtml: '<li class="dropdown-header"></li>',
			headerDivider: '<li class="divider" role="separator"></li>',
			
			itemContentSelector:'a',

			// min length to trigger the suggestion list
			minLength: 1,

			// number of pixels the scrollable parent container scrolled down
			scrollHeight: 0,

			// auto selects the first item
			autoSelect: true,

			// callbacks
			afterSelect: $.noop,
			afterEmptySelect: $.noop,

			// adds an item to the end of the list
			addItem: false,

			// delay between lookups
			delay: 0,
		});
	}

    $(document).ready(function() {
		$(".add-more").click(function(){
			cat_item++;
			var html = $(".copy").html()
			var problem_category_id = 'problem_category@' + cat_item.toString();
			html = html.replace('problem_category_tmp', problem_category_id)
			html = html.replace('problem_category_tmp', problem_category_id)
			var dependency_factor_id = 'dependency_factor@' + cat_item.toString();
			html = html.replace('dependency_factor_tmp', dependency_factor_id)
			html = html.replace('dependency_factor_tmp', dependency_factor_id)
			$(".category-group").append(html);
			enableAutoComplete();
		});

		$("body").on("click",".remove",function(){ 
			$(this).parents(".control-group").remove();
		});
    });

    function getAlgorithmList(){
        var data_list = []
        {{#each category_list}}
            var data = {
                "name": "{{category_name}}",
                "code": "{{category_name}}"
            }
            data_list.push(data)
        {{/each}}
        console.log('data_list: ')
        console.log(data_list)
        return data_list
    }

	enableAutoComplete();

</script>